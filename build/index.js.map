{"version":3,"file":"index.js","mappings":"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BAA4B;IACrGC,gBAAgB,EAAC;EAAe,GACpChB,iEAAA;IAAMiB,QAAQ,EAAC,SAAS;IAACC,QAAQ,EAAC,SAAS;IACxCC,CAAC,EAAC,41CAA41C;IAC91CL,IAAI,EAAC;EAAO,CAAC,CACZ;AAAE,CAAC,CACR;AAEDL,oEAAiB,CAACC,6CAAa,EAAE;EAACE,IAAI;EAAEtC,IAAI;EAAEkC,IAAIA,yCAAAA;AAAA,CAAC,CAAC;;;;;;;;;;;ACfpD;;;;;;;;;;;;ACAA;;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;;;;;;;;;;;UCAA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;UAEA;UACA;;;;;WCzBA;WACA;WACA;WACA;WACA,+BAA+B,wCAAwC;WACvE;WACA;WACA;WACA;WACA,iBAAiB,qBAAqB;WACtC;WACA;WACA;WACA;WACA,kBAAkB,qBAAqB;WACvC;WACA;WACA,KAAK;WACL;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;;;;;WC7BA;WACA;WACA;WACA;WACA;WACA,iCAAiC,WAAW;WAC5C;WACA;;;;;WCPA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;;;;;WCAA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;WCNA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;;WAEA;;WAEA;;WAEA;;WAEA;;WAEA;;WAEA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,MAAM,qBAAqB;WAC3B;WACA;WACA;WACA;WACA;WACA;WACA;WACA;;WAEA;WACA;WACA;;;;;UEnDA;UACA;UACA;UACA;UACA","sources":["webpack://kompakkt-wordpress/./src/edit.js","webpack://kompakkt-wordpress/./src/index.js","webpack://kompakkt-wordpress/./src/editor.scss","webpack://kompakkt-wordpress/./src/style.scss","webpack://kompakkt-wordpress/external window [\"wp\",\"apiFetch\"]","webpack://kompakkt-wordpress/external window [\"wp\",\"blockEditor\"]","webpack://kompakkt-wordpress/external window [\"wp\",\"blocks\"]","webpack://kompakkt-wordpress/external window [\"wp\",\"components\"]","webpack://kompakkt-wordpress/external window [\"wp\",\"element\"]","webpack://kompakkt-wordpress/external window [\"wp\",\"i18n\"]","webpack://kompakkt-wordpress/webpack/bootstrap","webpack://kompakkt-wordpress/webpack/runtime/chunk loaded","webpack://kompakkt-wordpress/webpack/runtime/compat get default export","webpack://kompakkt-wordpress/webpack/runtime/define property getters","webpack://kompakkt-wordpress/webpack/runtime/hasOwnProperty shorthand","webpack://kompakkt-wordpress/webpack/runtime/make namespace object","webpack://kompakkt-wordpress/webpack/runtime/jsonp chunk loading","webpack://kompakkt-wordpress/webpack/before-startup","webpack://kompakkt-wordpress/webpack/startup","webpack://kompakkt-wordpress/webpack/after-startup"],"sourcesContent":["import {__} from '@wordpress/i18n';\nimport {useBlockProps} from '@wordpress/block-editor';\nimport {useState, useEffect} from '@wordpress/element';\nimport apiFetch from '@wordpress/api-fetch';\nimport {SelectControl} from '@wordpress/components';\nimport './editor.scss';\n\nexport function edit({attributes: {instance, resource, endpoint, width, height, selectedModel}, setAttributes}) {\n\tconst [models, setModels] = useState([]);\n\n\tuseEffect(() => {\n\t\tapiFetch({path: '/kompakkt/v1/models'}).then(models => {\n\t\t\tsetModels(models);\n\t\t\tif (selectedModel.length === 0) {\n\t\t\t\tsetAttributes({selectedModel: models[0].id});\n\t\t\t}\n\t\t});\n\t}, []);\n\n\tuseEffect(() => {\n\t\tapiFetch({path: '/kompakkt/v1/instance-url'}).then(instance => {\n\t\t\tinstance = instance || 'https://kompakkt.de/viewer/index.html';\n\t\t\tsetAttributes({instance});\n\t\t});\n\t}, []);\n\n\t// When selectedModel updates, get the first file\n\tuseEffect(() => {\n\t\tconst model = models.find(model => model.id === selectedModel);\n\t\tif (model?.files) {\n\t\t\tconst files = JSON.parse(model.files);\n\t\t\tconst firstValidFile = files[0];\n\t\t\tconst resource = firstValidFile.split('/').pop();\n\t\t\tconst endpoint = `${location.origin}/index.php?rest_route=/kompakkt/v1/model&id=${selectedModel}`;\n\t\t\tsetAttributes({resource, endpoint});\n\t\t}\n\t}, [selectedModel]);\n\n\t// Key to reload app-kompakkt when the properties change\n\tconst key = `${instance}-${resource}-${endpoint}`;\n\n\treturn (<div {...useBlockProps()}>\n\t\t<SelectControl\n\t\t\tlabel={__('Select a Model', 'kompakkt')}\n\t\t\toptions={models.map(model => ({label: model.title, value: model.id}))}\n\t\t\tvalue={selectedModel}\n\t\t\tonChange={value => setAttributes({selectedModel: value})}\n\t\t/>\n\n\t\t<app-kompakkt key={key} instance={instance} resource={resource} endpoint={endpoint}\n\t\t\t\t\t  style={{width, height}}></app-kompakkt>\n\t</div>);\n}\n\nexport function save({attributes: {instance, resource, endpoint, width, height}}) {\n\treturn (<div {...useBlockProps.save()}>\n\t\t<app-kompakkt instance={instance} resource={resource} endpoint={endpoint}\n\t\t\t\t\t  style={{width, height}}></app-kompakkt>\n\t</div>);\n}\n","import {registerBlockType} from '@wordpress/blocks';\nimport './style.scss';\nimport {edit, save} from './edit';\nimport metadata from './block.json';\nimport {Icon} from '@wordpress/components';\n\nconst icon = () => (\n\t<Icon icon={<svg width=\"96\" height=\"96\" viewBox=\"0 0 96 96\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t enableBackground=\"new 0 0 96 96\">\n\t\t<path fillRule=\"evenodd\" clipRule=\"evenodd\"\n\t\t\t  d=\"M51 3C51 1.61929 49.8807 0.5 48.5 0.5C47.1193 0.5 46 1.61929 46 3V19.5C46 20.8807 47.1193 22 48.5 22C49.8807 22 51 20.8807 51 19.5V3ZM81.3102 79.8709C80.1343 79.1472 78.5945 79.5139 77.8708 80.6898C77.1472 81.8657 77.5138 83.4055 78.6897 84.1291L91.6897 92.1291C92.8656 92.8528 94.4055 92.4861 95.1291 91.3102C95.8528 90.1343 95.4861 88.5945 94.3102 87.8709L81.3102 79.8709ZM18.1291 80.6898C17.4055 79.5139 15.8656 79.1472 14.6897 79.8709L1.68974 87.8709C0.513846 88.5945 0.147212 90.1343 0.870839 91.3102C1.59447 92.4861 3.13433 92.8528 4.31023 92.1291L17.3102 84.1291C18.4861 83.4055 18.8528 81.8657 18.1291 80.6898ZM49.8582 28.2308C48.8149 27.5427 47.4838 27.4631 46.3659 28.022L30.882 35.7639C29.647 36.3814 29.1464 37.8831 29.7639 39.118C30.3814 40.353 31.8831 40.8535 33.118 40.2361L47.8278 32.8813L66.8607 45.4349L46.6395 57.9721L27.1792 43.2687C24.8303 41.494 21.4732 43.2356 21.5712 46.1779L22.4873 73.6596C22.5189 74.6075 22.9339 75.502 23.6372 76.1384L44.3227 94.8538C45.181 95.6304 46.4602 95.7162 47.4146 95.0613L72.4805 77.8592C73.4316 77.2065 74 76.127 74 74.9734L74 45.5C74 44.6598 73.5779 43.8758 72.8765 43.4131L49.8582 28.2308ZM48.4001 62.7635L69 49.9916L69 74.1836L48.5 88.2522V71.5C48.5 70.1193 47.3807 69 46 69C44.6193 69 43.5 70.1193 43.5 71.5V87.3667L27.4633 72.8574L26.6732 49.1531L44.4459 62.5814C45.5998 63.4532 47.171 63.5256 48.4001 62.7635Z\"\n\t\t\t  fill=\"black\"/>\n\t</svg>}/>\n)\n\nregisterBlockType(metadata.name, {icon, edit, save});\n","// extracted by mini-css-extract-plugin\nexport {};","// extracted by mini-css-extract-plugin\nexport {};","module.exports = window[\"wp\"][\"apiFetch\"];","module.exports = window[\"wp\"][\"blockEditor\"];","module.exports = window[\"wp\"][\"blocks\"];","module.exports = window[\"wp\"][\"components\"];","module.exports = window[\"wp\"][\"element\"];","module.exports = window[\"wp\"][\"i18n\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t\"index\": 0,\n\t\"./style-index\": 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkkompakkt_wordpress\"] = self[\"webpackChunkkompakkt_wordpress\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [\"./style-index\"], () => (__webpack_require__(\"./src/index.js\")))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n",""],"names":["__","useBlockProps","useState","useEffect","apiFetch","SelectControl","edit","attributes","instance","resource","endpoint","width","height","selectedModel","setAttributes","models","setModels","path","then","length","id","model","find","files","JSON","parse","firstValidFile","split","pop","location","origin","key","createElement","label","options","map","title","value","onChange","style","save","registerBlockType","metadata","Icon","icon","viewBox","fill","xmlns","enableBackground","fillRule","clipRule","d","name"],"sourceRoot":""}